<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/swan_stream/search/search.css">
</head>
<body>

<main id="content" class="search-main">
	<div></div>
	<div class="content-margin">
	    <div class="search_title-area">
			<div class="search_title-box">
				<div>
					<h2 class="search_title">
						비디오 장르
					</h2>
				</div>
			</div>
			<div class="show-more-button">
				<a class="show-more-button-link" href="/swan_stream/search/searchTitle.do?title='video_genre'">
					모두 보기
				</a>
			</div>
	    </div>
	    <div class="search-content">
	    	<button type="button" class="slide-left-slidernav">
	    		<span>
	    			<svg width="10" height="40" viewBox="0 0 10 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
	    				<path fill-rule="evenodd" clip-rule="evenodd" d="M9.476.09c.452.226.65.805.44 1.295L1.985 20l7.933 18.615c.208.49.011 1.07-.44 1.295-.452.226-.987.012-1.196-.477L0 20 8.281.567c.209-.49.744-.703 1.195-.477Z" fill="#FAADB4"></path>
	    			</svg>
	    		</span>
	    	</button>
	    	<ul class="search-content_lists">
<!-- 	    		<li class="search-content_list">
	    			<article>
	    				<a class="search-content_list_link" href="#searchPageWithTitleAsParameter">
	    					<div class="search-link-box">
	    						<img src='/swan_stream/images/search/genre/1.png' />
								<div class='search-link-box_title'>
									<p>한국 드라마</p>
								</div>
	    					</div>
	    				</a>
	    			</article>
	    		</li> -->
	    	</ul>
	    	<button type="button" class="slide-right-slidernav">
	    		<span>
	    			<svg width="10" height="40" viewBox="0 0 10 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
	    				<path fill-rule="evenodd" clip-rule="evenodd" d="M.524.09c-.452.226-.65.805-.44 1.295L8.015 20 .083 38.615c-.208.49-.011 1.07.44 1.295.452.226.987.012 1.196-.477L10 20 1.719.567C1.51.077.975-.136.524.09Z" fill="#FAADB4"></path>
	    			</svg>
	    		</span>
	    	</button>
	    </div>
	</div>
	
	<div class="content-margin">
	    <div class="search_title-area">
			<div class="search_title-box">
				<div>
					<h2 class="search_title">
						웹툰 장르
					</h2>
				</div>
			</div>
			<div class="show-more-button">
				<a class="show-more-button-link" href="/swan_stream/search/searchTitle.do?title='webtoon_genre'">
					모두 보기
				</a>
			</div>
	    </div>
	    <div class="search-content">
	    	<button type="button" class="slide-left-slidernav">
	    		<span>
	    			<svg width="10" height="40" viewBox="0 0 10 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
	    				<path fill-rule="evenodd" clip-rule="evenodd" d="M9.476.09c.452.226.65.805.44 1.295L1.985 20l7.933 18.615c.208.49.011 1.07-.44 1.295-.452.226-.987.012-1.196-.477L0 20 8.281.567c.209-.49.744-.703 1.195-.477Z" fill="#FAADB4"></path>
	    			</svg>
	    		</span>
	    	</button>
	    	<ul class="search-content_lists">
	    	</ul>
	    	<button type="button" class="slide-right-slidernav">
	    		<span>
	    			<svg width="10" height="40" viewBox="0 0 10 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
	    				<path fill-rule="evenodd" clip-rule="evenodd" d="M.524.09c-.452.226-.65.805-.44 1.295L8.015 20 .083 38.615c-.208.49-.011 1.07.44 1.295.452.226.987.012 1.196-.477L10 20 1.719.567C1.51.077.975-.136.524.09Z" fill="#FAADB4"></path>
	    			</svg>
	    		</span>
	    	</button>
	    </div>
	</div>
	
	<div class="content-margin">
	    <div class="search_title-area">
			<div class="search_title-box">
				<div>
					<h2 class="search_title">
						비디오 국가
					</h2>
				</div>
			</div>
			<div class="show-more-button">
				<a class="show-more-button-link" href="/swan_stream/search/searchTitle.do?title='video_nation'">
					모두 보기
				</a>
			</div>
	    </div>
	    <div class="search-content">
	    	<button type="button" class="slide-left-slidernav">
	    		<span>
	    			<svg width="10" height="40" viewBox="0 0 10 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
	    				<path fill-rule="evenodd" clip-rule="evenodd" d="M9.476.09c.452.226.65.805.44 1.295L1.985 20l7.933 18.615c.208.49.011 1.07-.44 1.295-.452.226-.987.012-1.196-.477L0 20 8.281.567c.209-.49.744-.703 1.195-.477Z" fill="#FAADB4"></path>
	    			</svg>
	    		</span>
	    	</button>
	    	<ul class="search-content_lists">
	    	</ul>
	    	<button type="button" class="slide-right-slidernav">
	    		<span>
	    			<svg width="10" height="40" viewBox="0 0 10 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
	    				<path fill-rule="evenodd" clip-rule="evenodd" d="M.524.09c-.452.226-.65.805-.44 1.295L8.015 20 .083 38.615c-.208.49-.011 1.07.44 1.295.452.226.987.012 1.196-.477L10 20 1.719.567C1.51.077.975-.136.524.09Z" fill="#FAADB4"></path>
	    			</svg>
	    		</span>
	    	</button>
	    </div>
	</div>
</main>

<script type="text/javascript" src="http://code.jquery.com/jquery-3.6.1.min.js"></script>
<script>
let i = [0,0,0];
let row;
let width = $(window).width();
if(width >= 896) $(".slide-right-slidernav:eq(2)").hide();
let clickCount = [1,1,1];

// This will execute whenever the window is resized
$(window).resize(function() {
	width = $(window).width(); // New width
	if(width >= 896) $(".slide-right-slidernav:eq(2)").hide();
	else if(width <896) $(".search:eq(2)").show();
});

$(".slide-left-slidernav").hide();
$(".slide-left-slidernav").click(function(){
	row = $(".slide-left-slidernav").index(this)
	clickCount[row]-=1;
	i[row]+=100;
	if(i[row]==0)
		$(".slide-left-slidernav:eq("+row+")").hide();
	if($(".slide-right-slidernav:eq("+row+")").is(":hidden"))
		$(".slide-right-slidernav:eq("+row+")").show();
	$(".search-content_lists:eq("+row+")").css("transform","translateX("+i[row]+"%");
});
$(".slide-right-slidernav").click(function(){
	row = $(".slide-right-slidernav").index(this);
	clickCount[row]+=1;
	i[row]-=100;
	if(width >= 992){
		if(row == 0){
			if(clickCount[row]==3){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		} else if(row == 1){
			if(clickCount[row]==2){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		}
	} else if(width >= 896){
		if(row == 0){
			if(clickCount[row]==4){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		} else if(row == 1){
			if(clickCount[row]==2){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		}
	} else {
		if(row == 0){
			if(clickCount[row]==5){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		} else if(row == 1){
			if(clickCount[row]==3){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		} else if(row == 2){
			if(clickCount[row]==2){
				$(".slide-right-slidernav:eq("+row+")").hide();
			}
		}
	}
	$(".search-content_lists:eq("+row+")").css("transform","translateX("+i[row]+"%)");
	$(".slide-left-slidernav:eq("+row+")").show();
});

$(function(){
	$(".search_title").each(function(outsideIndex){
		let title = $(this)[0].innerText;
		if(title === "비디오 장르") title = "video_genre";
		else if(title === "웹툰 장르") title = "webtoon_genre";
		else if(title === "비디오 국가") title = "video_nation";
		$.ajax({
			url: "/swan_stream/search/getSearchTitle.do",
			type: "post",
			data: "title="+title,
			dataType: "json",
			success: function(data) {
				$.each(data.list, function(index, items){
					//console.log(index, items)
					$("<li/>",{class: "search-content_list"})
						.append($("<article/>")
							.append($("<a/>",{class: "search-content_list_link"})
								.append($("<div/>",{class: "search-link-box"})
									.append($("<img/>",{src: "/swan_stream/images/search/genre/"+(index+1)+".png"}))
									.append($("<div/>",{class: "search-link-box_title"})
										.append($("<p/>",{text: items}))
									)
								)
							)
						).appendTo($(".search-content_lists:eq("+outsideIndex+")"))
				});
			},
			error: function(err){
				console.log(err);
			}
		});
	});
});
</script>
</body>
</html>